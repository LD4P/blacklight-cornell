<%= form_tag catalog_index_path, :class => 'advanced', :method => :get do  %>
  <%#= search_as_hidden_fields(:params => advanced_search_context ) %>
  <div class="row">
  <div class="span6 pull-left">
    <div class="query_zone well">
    <div class="input_row">
      <label for="q" class="hide-text"><%= t('blacklight.search.form.q') %></label>

      <%= text_field_tag "q_row[]", params[:q], :placeholder => t('blacklight.search.form.q'), :id => "q", :autocapitalize => "off" %>

      <%= select_tag("op_row[]", options_for_select({'all'=>'AND','any'=>'OR', 'phrase' => 'phrase'}.sort,'all'), :class => 'input-small') %> in

      <%= select_tag("search_field_row[]", options_for_select(search_fields_for_advanced_search.collect{|key, field_def| [field_def.label, field_def.field]}, :selected => params[:search_field]), :id => 'search_field_advanced', :class => 'advanced-search-field') %>
    </div>
  

    <%= render :partial => 'advanced_search_rows' %>
  </div>

  <a href="#" id="add-row"><i class="icon-plus-sign"></i> Add more search parameters</a>

  <%# # Comment out the display of active constraints -- still need to be removed
      # from the query before it's sent to Solr. John will handle this in the
      # controller.
  %>
  <%# unless (search_context_str = render_search_to_s( advanced_search_context)).blank? %>
    <%# <div class="constraints">
      <h4>Within search:</h4> %>
      <%#= search_context_str %>
    <%# </div> %>
  <%# end %>

  <div class="sort_submit_buttons">
    <%= label_tag(:sort, "Sort results by") %>

    <%= select_tag(:sort, options_for_select(sort_fields, h(params[:sort]))) %>

    <%= hidden_field_tag(:search_field, blacklight_config.advanced_search[:url_key]) %>
    <div class="submit-reset">
    <%= submit_tag 'Search', :class=>'btn btn-inverse', :id=>'advanced_search' %>
      <%= link_to "Reset", {:controller => "advanced", :action => "index"}, :class =>"reset btn" %>
    </div>
  </div>
</div>

<div class="span5 pull-left home-message as-tips">
    <h3>Search Tips</h3>
    <ul>
      <li>
        Select all from the dropdown list if you want all of your search terms to appear in the record.
        e.g. politics history Canada (all) will find items containing the terms politics AND history AND Canada
      </li>

      <li>Select any from the dropdown list if you want any of your search terms to appear in the record.
        e.g. youth adolescents children (any) will find items containing the terms youth OR adolescents OR children
      </li>

      <li>Select phrase from the dropdown list to limit search to an exact phrase.
        e.g. united states (phrase) will search “united states”
      </li>

      <li>The All Fields option searches the full catalog record. Select specific fields (title, author, publisher, etc.) to limit your search terms to a particular field in the record.
      </li>

      <li>You can apply limits (date, language, format, etc.) after you search using the facets on the left side of your search results.
      </li>

      <li>Truncation and wildcards are not supported. Word stemming is done automatically. 
      </li>
    </ul>
</div>
</div>
<% end %>

